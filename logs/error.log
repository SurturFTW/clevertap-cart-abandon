{"$metadata":{"attempts":1,"totalRetryDelay":0},"level":"error","message":"Error fetching CSV data from cart-abandon: Resolved credential object is not valid","service":"clevertap-processor","stack":"Error: Resolved credential object is not valid\n    at SignatureV4S3Express.validateResolvedCredentials (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/signature-v4/dist-cjs/index.js:456:13)\n    at SignatureV4S3Express.signRequest (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/signature-v4/dist-cjs/index.js:596:10)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runNextTicks (node:internal/process/task_queues:69:3)\n    at listOnTimeout (node:internal/timers:569:9)\n    at process.processTimers (node:internal/timers:543:7)\n    at async AwsSdkSigV4Signer.sign (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/core/dist-cjs/submodules/httpAuthSchemes/index.js:108:27)\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-sdk-s3/dist-cjs/index.js:482:15\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-sdk-s3/dist-cjs/index.js:110:22","timestamp":"2025-06-04T10:30:00.447Z"}
{"$metadata":{"attempts":1,"totalRetryDelay":0},"level":"error","message":"Cron Job 1 failed: Resolved credential object is not valid","service":"clevertap-processor","stack":"Error: Resolved credential object is not valid\n    at SignatureV4S3Express.validateResolvedCredentials (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/signature-v4/dist-cjs/index.js:456:13)\n    at SignatureV4S3Express.signRequest (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/signature-v4/dist-cjs/index.js:596:10)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runNextTicks (node:internal/process/task_queues:69:3)\n    at listOnTimeout (node:internal/timers:569:9)\n    at process.processTimers (node:internal/timers:543:7)\n    at async AwsSdkSigV4Signer.sign (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/core/dist-cjs/submodules/httpAuthSchemes/index.js:108:27)\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-sdk-s3/dist-cjs/index.js:482:15\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-sdk-s3/dist-cjs/index.js:110:22","timestamp":"2025-06-04T10:30:00.447Z"}
{"$metadata":{"attempts":1,"totalRetryDelay":0},"level":"error","message":"Scheduled Cron Job 1 failed: Resolved credential object is not valid","service":"clevertap-processor","stack":"Error: Resolved credential object is not valid\n    at SignatureV4S3Express.validateResolvedCredentials (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/signature-v4/dist-cjs/index.js:456:13)\n    at SignatureV4S3Express.signRequest (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/signature-v4/dist-cjs/index.js:596:10)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runNextTicks (node:internal/process/task_queues:69:3)\n    at listOnTimeout (node:internal/timers:569:9)\n    at process.processTimers (node:internal/timers:543:7)\n    at async AwsSdkSigV4Signer.sign (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/core/dist-cjs/submodules/httpAuthSchemes/index.js:108:27)\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-sdk-s3/dist-cjs/index.js:482:15\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-sdk-s3/dist-cjs/index.js:110:22","timestamp":"2025-06-04T10:30:00.447Z"}
{"$fault":"client","$metadata":{"attempts":1,"extendedRequestId":"fC126toWJB4wK+3gQ2ks7Q3MZ0Cd75613MPb3hBaZoKk2HVgKlyh+PghD+Br94lADR5roV1Mtew=","httpStatusCode":403,"requestId":"HSG1VF3WH506PX5V","totalRetryDelay":0},"Code":"AccessDenied","HostId":"fC126toWJB4wK+3gQ2ks7Q3MZ0Cd75613MPb3hBaZoKk2HVgKlyh+PghD+Br94lADR5roV1Mtew=","RequestId":"HSG1VF3WH506PX5V","level":"error","message":"Error fetching CSV data from cart-abandon: User: arn:aws:iam::666908824322:user/Dev-Clevertap is not authorized to perform: s3:GetObject on resource: \"arn:aws:s3:::cart-abandon/1749031435-1749031435-AddToCart-20250604-0-21.csv.gz\" because no identity-based policy allows the s3:GetObject action","name":"AccessDenied","service":"clevertap-processor","stack":"AccessDenied: User: arn:aws:iam::666908824322:user/Dev-Clevertap is not authorized to perform: s3:GetObject on resource: \"arn:aws:s3:::cart-abandon/1749031435-1749031435-AddToCart-20250604-0-21.csv.gz\" because no identity-based policy allows the s3:GetObject action\n    at throwDefaultError (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/smithy-client/dist-cjs/index.js:388:20)\n    at /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/smithy-client/dist-cjs/index.js:397:5\n    at de_CommandError (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/client-s3/dist-cjs/index.js:4953:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-sdk-s3/dist-cjs/index.js:484:18\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-sdk-s3/dist-cjs/index.js:110:22\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-sdk-s3/dist-cjs/index.js:137:14\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22","timestamp":"2025-06-04T10:45:00.939Z"}
{"$fault":"client","$metadata":{"attempts":1,"extendedRequestId":"fC126toWJB4wK+3gQ2ks7Q3MZ0Cd75613MPb3hBaZoKk2HVgKlyh+PghD+Br94lADR5roV1Mtew=","httpStatusCode":403,"requestId":"HSG1VF3WH506PX5V","totalRetryDelay":0},"Code":"AccessDenied","HostId":"fC126toWJB4wK+3gQ2ks7Q3MZ0Cd75613MPb3hBaZoKk2HVgKlyh+PghD+Br94lADR5roV1Mtew=","RequestId":"HSG1VF3WH506PX5V","level":"error","message":"Cron Job 1 failed: User: arn:aws:iam::666908824322:user/Dev-Clevertap is not authorized to perform: s3:GetObject on resource: \"arn:aws:s3:::cart-abandon/1749031435-1749031435-AddToCart-20250604-0-21.csv.gz\" because no identity-based policy allows the s3:GetObject action","name":"AccessDenied","service":"clevertap-processor","stack":"AccessDenied: User: arn:aws:iam::666908824322:user/Dev-Clevertap is not authorized to perform: s3:GetObject on resource: \"arn:aws:s3:::cart-abandon/1749031435-1749031435-AddToCart-20250604-0-21.csv.gz\" because no identity-based policy allows the s3:GetObject action\n    at throwDefaultError (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/smithy-client/dist-cjs/index.js:388:20)\n    at /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/smithy-client/dist-cjs/index.js:397:5\n    at de_CommandError (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/client-s3/dist-cjs/index.js:4953:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-sdk-s3/dist-cjs/index.js:484:18\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-sdk-s3/dist-cjs/index.js:110:22\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-sdk-s3/dist-cjs/index.js:137:14\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22","timestamp":"2025-06-04T10:45:00.940Z"}
{"$fault":"client","$metadata":{"attempts":1,"extendedRequestId":"fC126toWJB4wK+3gQ2ks7Q3MZ0Cd75613MPb3hBaZoKk2HVgKlyh+PghD+Br94lADR5roV1Mtew=","httpStatusCode":403,"requestId":"HSG1VF3WH506PX5V","totalRetryDelay":0},"Code":"AccessDenied","HostId":"fC126toWJB4wK+3gQ2ks7Q3MZ0Cd75613MPb3hBaZoKk2HVgKlyh+PghD+Br94lADR5roV1Mtew=","RequestId":"HSG1VF3WH506PX5V","level":"error","message":"Scheduled Cron Job 1 failed: User: arn:aws:iam::666908824322:user/Dev-Clevertap is not authorized to perform: s3:GetObject on resource: \"arn:aws:s3:::cart-abandon/1749031435-1749031435-AddToCart-20250604-0-21.csv.gz\" because no identity-based policy allows the s3:GetObject action","name":"AccessDenied","service":"clevertap-processor","stack":"AccessDenied: User: arn:aws:iam::666908824322:user/Dev-Clevertap is not authorized to perform: s3:GetObject on resource: \"arn:aws:s3:::cart-abandon/1749031435-1749031435-AddToCart-20250604-0-21.csv.gz\" because no identity-based policy allows the s3:GetObject action\n    at throwDefaultError (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/smithy-client/dist-cjs/index.js:388:20)\n    at /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/smithy-client/dist-cjs/index.js:397:5\n    at de_CommandError (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/client-s3/dist-cjs/index.js:4953:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-sdk-s3/dist-cjs/index.js:484:18\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-sdk-s3/dist-cjs/index.js:110:22\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-sdk-s3/dist-cjs/index.js:137:14\n    at async /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22","timestamp":"2025-06-04T10:45:00.941Z"}
{"level":"error","message":"Cron Job 1 failed: s3Service.uploadCsv is not a function","service":"clevertap-processor","stack":"TypeError: s3Service.uploadCsv is not a function\n    at CronJob1.execute (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/jobs/cronJob1.js:24:33)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async cron.schedule.scheduled [as _execution] (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/index.js:41:9)","timestamp":"2025-06-04T12:18:01.936Z"}
{"level":"error","message":"Scheduled Cron Job 1 failed: s3Service.uploadCsv is not a function","service":"clevertap-processor","stack":"TypeError: s3Service.uploadCsv is not a function\n    at CronJob1.execute (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/jobs/cronJob1.js:24:33)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async cron.schedule.scheduled [as _execution] (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/index.js:41:9)","timestamp":"2025-06-04T12:18:01.936Z"}
{"level":"error","message":"Error fetching delta CSV data: s3Service.downloadCsv is not a function","service":"clevertap-processor","stack":"TypeError: s3Service.downloadCsv is not a function\n    at CronJob2.fetchLatestDeltaData (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/jobs/cronJob2.js:68:48)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async CronJob2.execute (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/jobs/cronJob2.js:14:31)\n    at async cron.schedule.scheduled [as _execution] (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/index.js:54:9)","timestamp":"2025-06-04T12:45:01.821Z"}
{"level":"error","message":"Cron Job 2 failed: s3Service.downloadCsv is not a function","service":"clevertap-processor","stack":"TypeError: s3Service.downloadCsv is not a function\n    at CronJob2.fetchLatestDeltaData (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/jobs/cronJob2.js:68:48)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async CronJob2.execute (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/jobs/cronJob2.js:14:31)\n    at async cron.schedule.scheduled [as _execution] (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/index.js:54:9)","timestamp":"2025-06-04T12:45:01.822Z"}
{"level":"error","message":"Scheduled Cron Job 2 failed: s3Service.downloadCsv is not a function","service":"clevertap-processor","stack":"TypeError: s3Service.downloadCsv is not a function\n    at CronJob2.fetchLatestDeltaData (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/jobs/cronJob2.js:68:48)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async CronJob2.execute (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/jobs/cronJob2.js:14:31)\n    at async cron.schedule.scheduled [as _execution] (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/index.js:54:9)","timestamp":"2025-06-04T12:45:01.822Z"}
{"level":"error","message":"Error fetching CSV data from cart-abandon: zlib is not defined","service":"clevertap-processor","stack":"ReferenceError: zlib is not defined\n    at /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/services/s3Service.js:48:42\n    at new Promise (<anonymous>)\n    at Object.fetchCsvFromS3 (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/services/s3Service.js:43:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async CronJob1.fetchLatestCsvData (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/jobs/cronJob1.js:72:20)\n    at async CronJob1.execute (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/jobs/cronJob1.js:13:37)\n    at async cron.schedule.scheduled [as _execution] (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/index.js:41:9)","timestamp":"2025-06-04T16:33:01.037Z"}
{"level":"error","message":"Cron Job 1 failed: zlib is not defined","service":"clevertap-processor","stack":"ReferenceError: zlib is not defined\n    at /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/services/s3Service.js:48:42\n    at new Promise (<anonymous>)\n    at Object.fetchCsvFromS3 (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/services/s3Service.js:43:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async CronJob1.fetchLatestCsvData (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/jobs/cronJob1.js:72:20)\n    at async CronJob1.execute (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/jobs/cronJob1.js:13:37)\n    at async cron.schedule.scheduled [as _execution] (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/index.js:41:9)","timestamp":"2025-06-04T16:33:01.038Z"}
{"level":"error","message":"Scheduled Cron Job 1 failed: zlib is not defined","service":"clevertap-processor","stack":"ReferenceError: zlib is not defined\n    at /Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/services/s3Service.js:48:42\n    at new Promise (<anonymous>)\n    at Object.fetchCsvFromS3 (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/services/s3Service.js:43:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async CronJob1.fetchLatestCsvData (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/jobs/cronJob1.js:72:20)\n    at async CronJob1.execute (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/jobs/cronJob1.js:13:37)\n    at async cron.schedule.scheduled [as _execution] (/Users/dev.bathani/Desktop/Work/s3-delta-clevertap-app/src/index.js:41:9)","timestamp":"2025-06-04T16:33:01.038Z"}
